<!DOCTYPE html>
<html>
<style>
/* For selecting which tab to show ie add or delete */
.tabcontent {
  display: none;
}
</style>
<body>
<a href="{{ url_for('sysop_tasks', session_id=session_id) }}">Back to Sysop Tasks</a>

<h1>Edit, Delete, Add User Accounts</h1>



<!--- Section for finding and showing users--->
<br><hr>
<form action="{{ url_for('manage_users', session_id=session_id) }}" method="POST">
    <input type="hidden" name="choice" value="find">
  <label for="search">Find a User:</label><br>
  <input type="text" placeholder="Enter Name" id="search" name="search">
  <input type="submit" name="option" value="Find"><br><br>
</form>
<table>
    <tr>
        {% for header in headings %}
        <th>{{ header }}</th>
        {% endfor %}
    </tr>
    {% for row in data %}
    <tr>
        {% for cell in row %}
        <td>{{ cell }}</td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>
<hr>

<!--- Section for add, delete, edit --->
<div class="tab">
  <button class="tablinks" onclick="show(event, 'add')">Add User</button>
    <button class="tablinks" onclick="show(event, 'update')">Update User</button>
  <button class="tablinks" onclick="show(event, 'delete')">Delete User</button>
      <button class="tablinks" onclick="show(event, 'deactivate')">Deactivate User</button>
      <button class="tablinks" onclick="show(event, 'reactivate')">Reactivate User</button>
</div>


<form action="{{ url_for('manage_users', session_id=session_id) }}" method="POST" id="add" class="tabcontent">
    <input type="hidden" name="choice" value="add">

    <br>
    <label for="email">Email</label><br>
    <input type="email" placeholder="Enter email" name="email" id="email" required>
    <br><br>

    <label for="uid">Student ID</label><br>
    <input type="number" placeholder="Enter User ID" name="uid" id="uid" required>
    <br><br>

    <label for="fname">First Name</label><br>
    <input type="text" placeholder="Enter First Name" name="fname" id="fname" required>
    <br><br>

    <label for="lname">Last Name</label><br>
    <input type="text" placeholder="Enter Last Name" name="lname" id="lname" required>
    <br><br>

    User Group: <br>
    <input type="checkbox" id="student" name="student" value="Student">
    <label for="student"> Student &nbsp </label>

    <input type="checkbox" id="ta" name="ta" value="TA">
    <label for="ta"> TA &nbsp </label>

    <input type="checkbox" id="prof" name="prof" value="Prof">
    <label for="prof"> Prof &nbsp </label>

    <input type="checkbox" id="admin" name="admin" value="Admin">
    <label for="admin"> Admin &nbsp</label>

    <input type="checkbox" id="sysop" name="sysop" value="Sysop">
    <label for="sysop"> Sysop</label><br><br>

    <button type="submit" name="option" value="Add" class="button">Add</button>
</form>

<form action="{{ url_for('manage_users', session_id=session_id) }}" method="POST" id="update" class="tabcontent">
    <input type="hidden" name="choice" value="edit">

    <br><label for="system_uid">System User ID:</label><br>
    <input type="text" placeholder="Enter System User ID" id="system_uid" name="system_uid"><br>

    <br>
    <label for="usrname_update">Username</label><br>
    <input type="text" placeholder="Enter Username" name="usrname_update" id="usrname_update">
    <br><br>

    <label for="psw_update">Password</label><br>
    <input type="password" placeholder="Enter Password" name="psw_update" id="psw_update">
    <br><br>

    <label for="email_update">Email</label><br>
    <input type="email_update" placeholder="Enter email" name="email_update" id="email_update">
    <br><br>

    <label for="uid_update">Student ID</label><br>
    <input type="text" placeholder="Enter User ID" name="uid_update" id="uid_update">
    <br><br>

    <label for="fname_update">First Name</label><br>
    <input type="text" placeholder="Enter First Name" name="fname_update" id="fname_update">
    <br><br>

    <label for="lname_update">Last Name</label><br>
    <input type="text" placeholder="Enter Last Name" name="lname_update" id="lname_update">
    <br><br>

    User Group: <br>
    <input type="checkbox" id="student_update" name="student_update" value="Student">
    <label for="student_update"> Student &nbsp </label>

    <input type="checkbox" id="ta_update" name="ta_update" value="TA">
    <label for="ta_update"> TA &nbsp </label>

    <input type="checkbox" id="prof_update" name="prof_update" value="Prof">
    <label for="prof_update"> Prof &nbsp </label>

    <input type="checkbox" id="admin_update" name="admin_update" value="Admin">
    <label for="admin_update"> Admin &nbsp</label>

    <input type="checkbox" id="sysop_update" name="sysop_update" value="Sysop">
    <label for="sysop_update"> Sysop</label><br><br>

    <input type="submit" name="option" value="Edit"><br><br>


</form>

<form action="{{ url_for('manage_users', session_id=session_id) }}" method="POST" id="delete" class="tabcontent">
    <p>Warning this will delete the user from the database. Consider deactivating the user.</p>
    <input type="hidden" name="choice" value="delete">
    <br><label for="usrdelete">Delete a User Enter System User ID:</label><br>
    <input type="number" id="usrdelete" name="usrdelete">
    <input type="submit" name="option" value="Delete"><br><br>
</form>

<form action="{{ url_for('manage_users', session_id=session_id) }}" method="POST" id="deactivate" class="tabcontent">
    <input type="hidden" name="choice" value="deactivate">
    <br><label for="usrdeactivate">Deactivate a User Enter System User ID:</label><br>
    <input type="number" id="usrdeactivate" name="usrdeactivate">
    <input type="submit" name="option" value="Deactivate"><br><br>
</form>

<form action="{{ url_for('manage_users', session_id=session_id) }}" method="POST" id="reactivate" class="tabcontent">
    <input type="hidden" name="choice" value="reactivate">
    <br><label for="usrreactivate">Reactivate a User Enter System User ID:</label><br>
    <input type="number" id="usrreactivate" name="usrreactivate">
    <input type="submit" name="option" value="Reactivate"><br><br>
</form>
    <div style="text-align: center; color: red;">{{msg}}</div>

<script>
function show(evt, tab_name) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tab_name).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>
</body>
</html>
